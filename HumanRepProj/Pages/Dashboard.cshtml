@page
@model DashboardModel
@{
    ViewData["Title"] = "Dashboard";
}

<h1>@ViewData["Title"]</h1>

<div class="dashboard-container">
    <aside class="sidebar">
        <h2>HRIS</h2>
        <nav class="menu">
            <a href="Dashboard" class="menu-item active"><i class="fas fa-home"></i> Dashboard</a>
            <a href="Employees" class="menu-item"><i class="fas fa-users"></i> Employees</a>
            <a href="Departments" class="menu-item"><i class="fas fa-building"></i> Departments</a>
            <a href="Attendance" class="menu-item"><i class="fas fa-clock"></i> Attendance</a>
            <a href="Reports" class="menu-item"><i class="fas fa-file-alt"></i> Reports</a>
            <a href="Payroll" class="menu-item"><i class="fas fa-dollar-sign"></i> Payroll</a>
            <a href="Settings" class="menu-item"><i class="fas fa-cogs"></i> Settings</a>
        </nav>

        <!-- ✅ Logout Button -->
        <button type="button" class="menu-item logout-button" onclick="openLogoutPopup()">
            <i class="fas fa-sign-out-alt"></i>
            <span class="logout-text">Logout</span>
        </button>
    </nav>
</aside>

<main class="content">
    <div class="welcome-message">
        <h2>Welcome back to your HR dashboard.</h2>
    </div>
    <div class="dashboard-cards">
        <div class="card">
            <h3>Total Employees</h3>
            <p>245</p>
            <span>+12 from last month</span>
        </div>
        <div class="card">
            <h3>Departments</h3>
            <p>12</p>
            <span>+2 new departments</span>
        </div>
        <div class="card">
            <h3>Attendance Rate</h3>
            <p>96.5%</p>
            <span>+2.1% from last month</span>
        </div>
        <div class="card">
            <h3>Payroll</h3>
            <p>$245,500</p>
            <span>Processed this month</span>
        </div>
    </div>
    <div class="dashboard-charts">
        <div class="chart">
            <h3>Employee Growth</h3>
            <img src="employee-growth-chart.png" alt="Employee Growth Chart">
        </div>
        <div class="recent-activities">
            <h3>Recent Activities</h3>
            <ul>
                <li>
                    <i class="fas fa-user-plus"></i>
                    <div>
                        <p>New employee onboarded</p>
                        <span>Sarah Johnson joined as UX Designer</span>
                        <span>2 hours ago</span>
                    </div>
                </li>
                <li>
                    <i class="fas fa-tasks"></i>
                    <div>
                        <p>Performance review completed</p>
                        <span>15 reviews completed this week</span>
                        <span>5 hours ago</span>
                    </div>
                </li>
                <li>
                    <i class="fas fa-calendar-check"></i>
                    <div>
                        <p>Leave request approved</p>
                        <span>Michael Chan - 5 days vacation</span>
                        <span>Yesterday</span>
                    </div>
                </li>
                <li>
                    <i class="fas fa-user-times"></i>
                    <div>
                        <p>Employee resigned</p>
                        <span>Robert Smith - Software Engineer</span>
                        <span>2 days ago</span>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</main>
</div>
<!-- ✅ Logout Confirmation Popup -->
<div id="logoutPopup" class="popup-overlay">
    <div class="popup-content">
        <p>Are you sure you want to log out?</p>
        <div class="popup-buttons">
            <form method="post" asp-page-handler="Logout">
                <button type="submit" class="btn-confirm">Yes</button>
            </form>
            <button onclick="closeLogoutPopup()" class="btn-cancel">Cancel</button>
        </div>
    </div>
</div>

<!-- ✅ JavaScript for Popup -->
<script>
    function openLogoutPopup() {
        document.getElementById('logoutPopup').style.display = 'flex';
    }

    function closeLogoutPopup() {
        document.getElementById('logoutPopup').style.display = 'none';
    }
</script>

<!-- ✅ Styling -->
<style>
     /* ✅ Sidebar and Menu */
        .sidebar {
            width: 250px;
            float: left;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        nav {
            flex-grow: 1;
        margin-bottom: 50px;
        }

        .menu-item {
            display: flex;
            align-items: center;
            padding: 10px;
            color: #333;
            text-decoration: none;
            font-size: 16px;
            gap: 10px;
            transition: background 0.3s ease;
            border-radius: 4px;
        }

        .menu-item.active {
            background-color: #f0f0f0;
        }

        /* ✅ Logout Button */
        .logout-button {
            background-color: #ff4d4d;
            color: white;
            border: none;
            padding: 10px;
            width: 100%;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            gap: 10px;
            border-radius: 4px;
            transition: background 0.3s ease;
            margin-top: auto;
        margin-bottom: 32px;
        }

        .logout-button:hover {
            background-color: #cc0000;
        }
        margin-top: auto; /* Adjust this line */
    }

        .logout-button:hover {
            background-color: #cc0000;
        }


    /* ✅ Main Content */
    .content {
        margin-left: 270px;
        padding: 20px;
        background-color: #fff;
        min-height: 100vh;
    }

    .welcome-message h2 {
        color: #333;
        margin-bottom: 20px;
    }

    .dashboard-cards {
        display: flex;
        gap: 20px;
        margin-bottom: 20px;
    }

    .card {
        background-color: #fff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        flex: 1;
        text-align: center;
    }

        .card h3 {
            margin-bottom: 10px;
            color: #6c757d;
        }

        .card p {
            font-size: 24px;
            margin: 0;
        }

        .card span {
            display: block;
            margin-top: 10px;
            color: #6c757d;
        }

    .dashboard-charts {
        display: flex;
        gap: 20px;
    }

    .chart, .recent-activities {
        background-color: #fff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        flex: 1;
    }

        .chart img {
            width: 100%;
        }

        .recent-activities ul {
            list-style: none;
            padding: 0;
        }

        .recent-activities li {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

            .recent-activities li i {
                font-size: 24px;
                color: #6c757d;
            }

            .recent-activities li div {
                flex: 1;
            }

            .recent-activities li p {
                margin: 0;
                font-weight: bold;
            }

            .recent-activities li span {
                display: block;
                color: #6c757d;
            }

    /* ✅ Popup Overlay */
    .popup-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background-color: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(4px);
        align-items: center;
        justify-content: center;
        z-index: 999;
    }

    .popup-content {
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        width: 300px;
        text-align: center;
    }

    .popup-buttons {
        display: flex;
        justify-content: center;
        gap: 10px;
    }

    .btn-confirm, .btn-cancel {
        padding: 10px 20px;
        border: none;
        cursor: pointer;
        font-size: 16px;
        border-radius: 4px;
        transition: background 0.3s ease;
    }

    .btn-confirm {
        background-color: #4CAF50;
        color: white;
    }

        .btn-confirm:hover {
            background-color: #45a049;
        }

    .btn-cancel {
        background-color: #ff4d4d;
        color: white;
    }

        .btn-cancel:hover {
            background-color: #cc0000;
        }
</style>
